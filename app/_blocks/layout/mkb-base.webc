<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <!-- favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
  <link rel="manifest" href="/assets/site.webmanifest">
  <link rel="mask-icon" href="/assets/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <!-- google fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" webc:keep>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin webc:keep>
  <!-- <link href="https://fonts.googleapis.com/css2?family=Roboto+Flex:opsz,wght@8..144,300;8..144,500&display=swap" rel="stylesheet" webc:keep> -->
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&family=Roboto+Flex:opsz,wght@8..144,300;8..144,400;8..144,500;8..144,700&display=swap" rel="stylesheet" webc:keep>
  <!-- my scripts -->
  <link rel="stylesheet" href="/styles/main.css" webc:keep>
  <script src="/scripts/main.js" defer webc:keep></script>
</head>
<body>
  <mkb-header-secondary
    webc:if="header?.isSecondary"
    :header="header"
  ></mkb-header-secondary>
  <mkb-header webc:else :header="header"></mkb-header>

  <main class="main">
    <slot></slot>
  </main>

  <mkb-footer :is-footer="isFooter"></mkb-footer>

  <script webc:keep type="module">
    import { createApp } from 'https://unpkg.com/petite-vue@0.2.2/dist/petite-vue.es.js';

    function Validation() {
      return {
        formData: {
          name: {
            value: '',
            isError: false,
            regExp: /[а-яА-Я]+/,
            errorMessage: 'Поле является обязательным. Допускается ввод букв русского алфавита.',
          },
          phone: {
            value: '',
            isError: false,
            regExp: /./,
            errorMessage: 'Поле является обязательным.',
            // regExp: /^\+375\d{9}$/,
            // errorMessage: 'Поле является обязательным. Ввведите телефон в следующем формате: +375XXXXXXXXX',
          },
          comment: {
            value: '',
            isError: false,
            regExp: /./,
            errorMessage: 'Поле является обязательным.',
          },
        },
        validateInput(type) {
          const dataElement = this.formData[type];

          if (!dataElement.value.match(dataElement.regExp)) {
            dataElement.isError = true;
          } else {
            dataElement.isError = false;
          }
        },
        onFormSubmit(event) {
          const arrayFormData = Object.entries(this.formData);
          arrayFormData.forEach((formData) => {
            this.validateInput(formData[0]);
          });
          if (arrayFormData.find((formData) => formData[1].isError)) event.preventDefault();
        }
      }
    }

    createApp({
      Validation,
    }).mount();
  </script>
</body>
</html>